---
Description: Downloads the latest version of iTerm, creates a package, then uploads to Jamf
Identifier: com.github.smithjw-actions.jamf.iTerm
ParentRecipe: com.github.smithjw-actions.pkg.iTerm
MinimumVersion: '2.3'

Input:
  NAME: iTerm
  SOFTWARE_TITLE: '%NAME%'
  CATEGORY: Apps
  POLICY_CATEGORY: Apps
  POLICY_CUSTOM_TRIGGER: install-%SOFTWARE_TITLE%
  POLICY_NAME: '%NAME%'
  POLICY_RUN_COMMAND: ' '
  POLICY_RUN_RECON: 'false'
  POLICY_SCOPE_ALL_COMPUTERS: 'true'
  POLICY_TEMPLATE: Policy_Template-Self_Service.xml
  SELF_SERVICE_AVAILABLE: 'true'
  SELF_SERVICE_CATEGORY: 'Engineering'
  SELF_SERVICE_DESCRIPTION: |
    iTerm2 is a replacement for Terminal and the successor to iTerm.
    It works on Macs with macOS 10.14 or newer. iTerm2 brings the
    terminal into the modern age with features you never knew you
    always wanted.
  SELF_SERVICE_DISPLAY_NAME: '%NAME%'
  SELF_SERVICE_ICON: '%SOFTWARE_TITLE%.png'
  SELF_SERVICE_INSTALL_BUTTON: Install
  SELF_SERVICE_REINSTALL_BUTTON: Install

Process:
  - Processor: com.github.grahampugh.jamf-upload.processors/JamfPackageUploader
    Arguments:
      pkg_category: '%CATEGORY%'

  - Processor: com.github.grahampugh.jamf-upload.processors/JamfPolicyUploader
    Arguments:
      policy_template: '%POLICY_TEMPLATE%'
      policy_name: '%POLICY_NAME%'
      icon: '%SELF_SERVICE_ICON%'
      replace_policy: true
